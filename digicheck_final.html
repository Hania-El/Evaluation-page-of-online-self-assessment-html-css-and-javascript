<!DOCTYPE html>

<html>
<head>
    
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>Auswertung Ihres Digitalisierungschecks</title>
    <style>
        
        html{box-sizing:border-box}*,*:before,*:after{box-sizing:inherit}
        
        body {
            margin:0;
        }
        

        h2 {
            font-family: open sans;
            font-size: 22px;
            font-weight: bold;
            color: white;
            
        }
        
        header {
            font-family: open sans;
            text-align: center;
            margin-top: 26px;
            color: white;
        }
        
        
        .cat {
            display: flex;
            margin-top: auto;
            padding: 20px;
            justify-content: center;
            height:auto;
            width: auto;
        }
        
        
        .sum{
            display: flex;
            margin-top: auto;
            padding: 20px;
            justify-content: center;
            height:auto;
            width: auto;
        }
        
        
        
        @media (min-width:1200px){
            .categories{display: block;position: relative;float:left;margin-top: 80px;height: 300px;width:300px;
                        margin-left: auto; margin-right: auto;align-items: center;justify-content: center;text-align: center;padding:0 8px;}
        }
        
        @media (min-width:600px) and (max-width:1200px){
         .row1,.row2 {float:left; justify-content: center; align-items: center; text-align: center; position: relative; height: auto; width: auto; padding:20px;}
         .categories {position:relative; margin-left: auto; margin-right: auto; margin-top:80px}
        }
        
        @media (max-width:600px){
            .cat {display: block; text-align: center; justify-content: initial}
            .categories {margin-top:80px;}
            }
        
        .overall {
            display: block;
            margin-top: 150px;
            margin-left: auto; margin-right: auto;
            height: 300px; width: 300px;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        #graph1, #graph2, #graph3, #graph4, #graph5 {
            position:relative;
            margin-left:auto; margin-right: auto; margin-top: auto; margin-bottom: 90px;
            width:220px; height:220px;
        }
        canvas {
            display: block;
            position:absolute;
            top:0;
            left:0;
        }
        span {
            color:white;
            display:block;
            line-height:220px;
            text-align:center;
            width:220px;
            font-family:sans-serif;
            font-size:40px;
            font-weight:100;
            margin-left:5px;
        }
       
    </style> 
    <link href="https://fonts.googleapis.com/css?family=Raleway:400,300,600,800,900" rel="stylesheet" type="text/css">
    
</head>

<body>
    
    
    
    <main>
    
        <!--Teil mit Kategorien-->
        <section class="cat">
            
            <!--Kategorie1-->
            <div class="row1">
            <article class="categories" id="cat1">
                <div class="chart" id="graph1"><i id="cat1_perc"></i></div>
                <h2>Effizienz durch<br>Digitalisierung</h2>
            </article>
            
            <!--Kategorie2-->
            <article class="categories" id="cat2">
                <div class="chart" id="graph2"><i id="cat2_perc"></i></div>
                <h2>Technologien und<br>Geschäftsmodelle</h2>
            </article>
            </div>
            
            <div class="row2">
            <!--Kategorie3-->
            <article class="categories" id="cat3">
                <div class="chart" id="graph3"><i id="cat3_perc"></i></div>
                <h2>Methoden-<br>kompetenz</h2>
            </article> 
            
            <article class="categories" id="cat4">
                <div class="chart" id="graph4"><i id="cat4_perc"></i></div>
                <h2>Prototyping und<br>Implementierung</h2>
            </article>
            </div>
            
        </section>
        
        <!--Teil mit Gesamtbeurteilung-->
        <section class="sum">
            <div class="overall">
                <div class="chart" id="graph5"><i id="overall_perc"></i></div>
                <h2>GESAMTSCORE</h2>
            </div>
        </section>
      
                    
      
    </main>
    
    <script type="text/javascript">
    
              var typeform = new XMLHttpRequest();
              typeform.open("GET", "https://api.typeform.com/v1/form/lOBXSc?key=****************&completed=true&order_by[]=date_submit,desc&limit=1", false);
              typeform.send(null);
              var r = JSON.parse(typeform.response); 
              
              function resolve(obj,str){
                  var undef;
                  str=str.split(".");
                  while (obj && str[0])
                      obj=obj[str.shift()] || undef;
                  return obj;
              }
              
              
              var score_1a;
              var str1a = "responses.0.answers.list_62805050_choice";
              if (resolve(r,str1a)=="0"){
                  score_1a=1;
              } else if (resolve(r,str1a)=="1-5"){
                  score_1a=2;
              } else if (resolve(r,str1a)=="6-15"){
                  score_1a=3;
              }else if (resolve(r,str1a)=="16-30"){
                  score_1a=4;
              }else if (resolve(r,str1a)==">30"){
                  score_1a=5;
              }
              
              var score_1b;
              var str1b = "responses.0.answers.opinionscale_62206086";
              if (resolve(r,str1b)=="1"||resolve(r,str1b)=="2"){
                  score_1b=1;
              } else if (resolve(r,str1b)=="3"||resolve(r,str1b)=="4"){
                  score_1b=2;
              } else if (resolve(r,str1b)=="5"||resolve(r,str1b)=="6"){
                  score_1b=3;
              }else if (resolve(r,str1b)=="7"||resolve(r,str1b)=="8"){
                  score_1b=4;
              }else if (resolve(r,str1b)=="9"||resolve(r,str1b)=="10"){
                  score_1b=5;
              }
              
              var score_1c;
              var str1c = "responses.0.answers.opinionscale_62805314";
              if (resolve(r,str1c)=="1"||resolve(r,str1c)=="2"){
                  score_1c=1;
              } else if (resolve(r,str1c)=="3"||resolve(r,str1c)=="4"){
                  score_1c=2;
              } else if (resolve(r,str1c)=="5"||resolve(r,str1c)=="6"){
                  score_1c=3;
              }else if (resolve(r,str1c)=="7"||resolve(r,str1c)=="8"){
                  score_1c=4;
              }else if (resolve(r,str1c)=="9"||resolve(r,str1c)=="10"){
                  score_1c=5;
              }
              
              var score_1d;
              var str1d = "responses.0.answers.opinionscale_62805672";
              if (resolve(r,str1d)=="1"||resolve(r,str1d)=="2"){
                  score_1d=1;
              } else if (resolve(r,str1d)=="3"||resolve(r,str1d)=="4"){
                  score_1d=2;
              } else if (resolve(r,str1d)=="5"||resolve(r,str1d)=="6"){
                  score_1d=3;
              }else if (resolve(r,str1d)=="7"||resolve(r,str1d)=="8"){
                  score_1d=4;
              }else if (resolve(r,str1d)=="9"||resolve(r,str1d)=="10"){
                  score_1d=5;
              }
              
              var score_1e;
              var str1e = "responses.0.answers.list_62206627_choice";
              if (resolve(r,str1e)=="0"){
                  score_1e=1;
              } else if (resolve(r,str1e)=="1-2"){
                  score_1e=2;
              } else if (resolve(r,str1e)=="3-5"){
                  score_1e=3;
              } else if (resolve(r,str1e)=="6-10"){
                  score_1e=4;
              } else if (resolve(r,str1e)==">10"){
                  score_1e=5;
              }
              
              var score_cat1 = score_1a+score_1b+score_1c+score_1d+score_1e;
              var cat1_perc = Math.round((score_cat1/25)*100);
              
              
              var score_2a;
              var str2a = "responses.0.answers.opinionscale_59968550";
              if (resolve(r,str2a)=="1"||resolve(r,str2a)=="2"){
                  score_2a=1;
              } else if (resolve(r,str2a)=="3"||resolve(r,str2a)=="4"){
                  score_2a=2;
              } else if (resolve(r,str2a)=="5"||resolve(r,str2a)=="6"){
                  score_2a=3;
              } else if (resolve(r,str2a)=="7"||resolve(r,str2a)=="8"){
                  score_2a=4;
              } else if (resolve(r,str2a)=="9"||resolve(r,str2a)=="10"){
                  score_2a=5;
              }
              
              var score_2b;
              var str2b = "responses.0.answers.list_62209974_choice";
              if (resolve(r,str2b)=="(fast) nie"||resolve(r,str2b)=="sporadisch"){
                  score_2b=1;
              } else if (resolve(r,str2b)=="jährlich"){
                  score_2b=2;
              } else if (resolve(r,str2b)=="quartalsweise"){
                  score_2b=3;
              } else if (resolve(r,str2b)=="monatlich"){
                  score_2b=4;
              } else if (resolve(r,str2b)=="täglich"){
                  score_2b=5;
              }
              
              var score_2c;
              var str2c = "responses.0.answers.list_62807832_choice";
              if (resolve(r,str2c)=="0"){
                  score_2c=1;
              } else if (resolve(r,str2c)=="1-2"){
                  score_2c=2;
              } else if (resolve(r,str2c)=="3-5"){
                  score_2c=3;
              } else if (resolve(r,str2c)=="6-10"){
                  score_2c=4;
              } else if (resolve(r,str2c)==">10"){
                  score_2c=5;
              }
              
              var score_2d;
              var str2d = "responses.0.answers.opinionscale_63791129";
              if (resolve(r,str2d)=="1"||resolve(r,str2d)=="2"){
                  score_2d=1;
              } else if (resolve(r,str2d)=="3"||resolve(r,str2d)=="4"){
                  score_2d=2;
              } else if (resolve(r,str2d)=="5"||resolve(r,str2d)=="6"){
                  score_2d=3;
              } else if (resolve(r,str2d)=="7"||resolve(r,str2d)=="8"){
                  score_2d=4;
              } else if (resolve(r,str2d)=="9"||resolve(r,str2d)=="10"){
                  score_2d=5;
              }
             
              var score_cat2 = score_2a+score_2b+score_2c+score_2d;
              var cat2_perc = Math.round((score_cat2/20)*100);
              
              
              var score_3a;
              var str3a_1 = "responses.0.answers.rating_AB6kYVtlXUoE";
              var str3a_2 = "responses.0.answers.rating_uSmvsglWSLXg";
              var str3a_3 = "responses.0.answers.rating_nIRgBrwpIk8a";
              score_3a=Math.round((Number(resolve(r,str3a_1))+Number(resolve(r,str3a_2))+Number(resolve(r,str3a_3)))/3);
              
              var score_3b;
              var str3b = "responses.0.answers.opinionscale_62811561";
              if (resolve(r,str3b)=="1"||resolve(r,str3b)=="2"){
                  score_3b=1;
              } else if (resolve(r,str3b)=="3"||resolve(r,str3b)=="4"){
                  score_3b=2;
              } else if (resolve(r,str3b)=="5"||resolve(r,str3b)=="6"){
                  score_3b=3;
              } else if (resolve(r,str3b)=="7"||resolve(r,str3b)=="8"){
                  score_3b=4;
              } else if (resolve(r,str3b)=="9"||resolve(r,str3b)=="10"){
                  score_3b=5;
              }
               
              var score_3c;
              var str3c = "responses.0.answers.opinionscale_62811598";
              if (resolve(r,str3c)=="1"||resolve(r,str3c)=="2"){
                  score_3c=1;
              } else if (resolve(r,str3c)=="3"||resolve(r,str3c)=="4"){
                  score_3c=2;
              } else if (resolve(r,str3c)=="5"||resolve(r,str3c)=="6"){
                  score_3c=3;
              } else if (resolve(r,str3c)=="7"||resolve(r,str3c)=="8"){
                  score_3c=4;
              } else if (resolve(r,str3c)=="9"||resolve(r,str3c)=="10"){
                  score_3c=5;
              }
              
              var score_3d;
              var str3d = "responses.0.answers.list_62812267_choice";
              if (resolve(r,str3d)=="0"){
                  score_3d=1;
              } else if (resolve(r,str3d)=="1-2"){
                  score_3d=2;
              } else if (resolve(r,str3d)=="3-5"){
                  score_3d=3;
              } else if (resolve(r,str3d)=="6-10"){
                  score_3d=4;
              } else if (resolve(r,str3d)==">10"){
                  score_3d=5;
              }
              
              score_cat3=score_3a+score_3b+score_3c+score_3d;
              var cat3_perc = Math.round((score_cat3/20)*100);
              
              var score_4a;
              var str4a = "responses.0.answers.list_62812363_choice";
              if (resolve(r,str4a)=="0"){
                  score_4a=1;
              } else if (resolve(r,str4a)=="1-2"){
                  score_4a=2;
              } else if (resolve(r,str4a)=="3-5"){
                  score_4a=3;
              } else if (resolve(r,str4a)=="6-10"){
                  score_4a=4;
              } else if (resolve(r,str4a)==">10"){
                  score_4a=5;
              }
              
              var score_4b;
              var str4b = "responses.0.answers.list_62812641_choice";
              if (resolve(r,str4a)!="0"){
                if (resolve(r,str4b)=="0"){
                    score_4b=1;
                } else if (resolve(r,str4b)=="1-2"){
                    score_4b=2;
                } else if (resolve(r,str4b)=="3-5"){
                    score_4b=3;
                } else if (resolve(r,str4b)=="6-10"){
                    score_4b=4;
                } else if (resolve(r,str4b)==">10"){
                    score_4b=5;
                }
              } else {score_4b=0;}
              
              var score_4c;
              var str4c = "responses.0.answers.list_62812981_choice";
              if (resolve(r,str4c)=="0"){
                  score_4c=1;
              } else if (resolve(r,str4c)=="1-2"){
                  score_4c=2;
              } else if (resolve(r,str4c)=="3-5"){
                  score_4c=3;
              } else if (resolve(r,str4c)=="6-10"){
                  score_4c=4;
              } else if (resolve(r,str4c)==">10"){
                  score_4c=5;
              }
              
              var score_4d;
              var str4d = "responses.0.answers.list_62959493_choice";
              if (resolve(r,str4d)=="0-10%"){
                  score_4d=1;
              } else if (resolve(r,str4d)=="11-20%"){
                  score_4d=2;
              } else if (resolve(r,str4d)=="21-30%"){
                  score_4d=3;
              } else if (resolve(r,str4d)=="31-40%"){
                  score_4d=4;
              } else if (resolve(r,str4d)==">40%"){
                  score_4d=5;
              }
              
              var cat4_perc;
              if (resolve(r,str4a)!="0") {
                score_cat4=score_4a+score_4b+score_4c+score_4d;
                cat4_perc = Math.round((score_cat4/20)*100);
              } else {
                score_cat4=score_4a+score_4c+score_4d;
                cat4_perc = Math.round((score_cat4/15)*100);
              }
              
              var overall_perc = Math.round((cat1_perc + cat2_perc + cat3_perc + cat4_perc)/4);
              
          
          function circle(percentage, graphID, color){
              
              var options = {
                  percent: percentage,
                  size:  220,
                  lineWidth:  13,
                  rotate:  0
              };
              
              var canvas = document.createElement('canvas');
              var span = document.createElement('span');
              span.textContent = options.percent + "%";
              
              if (typeof(G_vmlCanvasManager) !== 'undefined') {
                  G_vmlCanvasManager.initElement(canvas);
              }
              
              var ctx = canvas.getContext('2d');
              canvas.width = canvas.height = options.size;
              
              document.getElementById(graphID).appendChild(span);
              document.getElementById(graphID).appendChild(canvas);
              
              ctx.translate(options.size / 2, options.size / 2); // change center
              ctx.rotate((-1 / 2 + options.rotate / 180) * Math.PI); // rotate -90 deg
              
              var radius = (options.size - options.lineWidth) / 2;
                    
              var drawCircle = function(color, lineWidth, percent) {
                          percent = Math.min(Math.max(0, percent), 1);
                          ctx.beginPath();
                          ctx.arc(0, 0, radius, 0, Math.PI * 2 * percent, false);
                          ctx.strokeStyle = color;
                          ctx.lineCap = 'round'; 
                          ctx.lineWidth = lineWidth;
                          ctx.stroke();
              };
              
              drawCircle('#efefef', options.lineWidth, 100 / 100);
              drawCircle(color, options.lineWidth, options.percent / 100);
              
              /*var x=0;
              var dx=0.15;
              function animation (){
                  requestAnimationFrame(animation);
                  drawCircle(color, options.lineWidth, x / 100);
                  x+=dx;
                  if (x>options.percent){
                      dx=0;
                  }
              }
               animation ();  */    
          }

          circle (cat1_perc, "graph1", "#e51a54");
          circle (cat2_perc, "graph2", "#f7a602");
          circle (cat3_perc, "graph3", "#93c11c");
          circle (cat4_perc, "graph4", "#29bbef");
          circle (overall_perc, "graph5", "rgba(150,150,150, 1)");
    
    </script>
 
</body>
</html>